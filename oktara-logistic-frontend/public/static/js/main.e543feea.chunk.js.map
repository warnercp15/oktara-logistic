{"version":3,"sources":["styles/components/global/Header.module.scss","styles/components/global/Footer.module.scss","context/places/PlacesContext.js","context/map/MapContext.js","components/global/Footer.js","components/global/Menu.js","components/global/Header.js","components/global/PageWrapper.js","context/packages/PackageContext.js","helpers/helper.js","apis/directionsApi.js","apis/logisticsApi.js","apis/searchApi.js","components/global/Modal.js","hooks/useModal.js","components/Package.js","components/CreatePackage.js","components/ManagePackages.js","pages/Manage.js","pages/Packages.js","context/map/mapReducer.js","context/map/MapProvider.js","context/packages/packageReducer.js","context/packages/PackageProvider.js","context/places/placesReducer.js","context/places/PlacesProvider.js","App.js","index.js"],"names":["module","exports","PlacesContext","createContext","MapContext","Footer","children","className","styles","footer","menuItems","text","url","BurgerMenu","open","setOpen","burger","type","onClick","MenuElements","router","useLocation","map","menuItem","to","link","pathname","Menu","useState","menu","Header","navbar","logo","PageWrapper","PackageContext","Toast","Swal","mixin","toast","position","showConfirmButton","timer","timerProgressBar","didOpen","addEventListener","stopTimer","resumeTimer","getUserLocation","a","Promise","resolve","reject","navigator","geolocation","getCurrentPosition","coords","longitude","latitude","err","alert","console","log","directionsApi","axios","create","baseURL","params","alternatives","geometries","overview","steps","access_token","logisticsApi","searchApi","limit","language","Modal","isShowing","hide","ReactDOM","createPortal","aria-modal","aria-hidden","tabIndex","role","data-dismiss","aria-label","style","marginBottom","document","body","useModal","setIsShowing","toggle","Package","pack","useContext","addShipment","shipments","location","name","status","path","Card","id","includes","CreatePackage","locationSelected","setLocationSelected","placeSelected","setPlaceSelected","packageName","setPackageName","register","useForm","searchPlacesByTerm","setPlaces","isLoadingPlaces","places","refreshPackages","packages","debounceRef","useRef","existPendingPackage","some","addNewPackage","e","preventDefault","fire","icon","title","post","required","placeholder","onChange","target","value","event","current","clearTimeout","setTimeout","length","maxHeight","overflowY","display","flexDirection","alignItems","border","margin","padding","place","color","textAlign","cursor","place_name","fontSize","ManagePackages","refresh","setPackages","clearShipments","userLocation","getRouteBetweenPoints","getPackages","get","response","data","updatePackages","put","list","p","useEffect","join","shipment","center","lng","lat","slice","error","filter","reverse","Manage","isLoading","setMap","mapDiv","useLayoutEffect","Map","container","zoom","ref","height","Packages","mapReducer","state","action","isMapReady","payload","markers","INITIAL_STATE","undefined","MapProvider","useReducer","dispatch","start","route","geometry","routes","coordinates","bounds","LngLatBounds","coord","newCoord","extend","sourceData","features","properties","getLayer","removeLayer","removeSource","addSource","addLayer","source","layout","paint","forEach","marker","remove","newMarkers","popup","Popup","setHTML","text_es","place_name_es","newMarker","Marker","setPopup","setLngLat","addTo","push","Provider","myLocationPopup","getCenter","packageReducer","PackageProvider","removeShipment","index","indexOf","splice","placesReducer","PlacesProvider","query","Error","proximity","then","lngLat","App","exact","component","mapboxgl","accessToken","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e543feea.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Header_navbar__25Nse\",\"logo\":\"Header_logo__1w8sw\",\"logo-secondary\":\"Header_logo-secondary__3kVNS\",\"menu\":\"Header_menu__1JD1z\",\"burger\":\"Header_burger__7-5qu\",\"burger-open\":\"Header_burger-open__2ydst\",\"links-container\":\"Header_links-container__1n3bw\",\"links-container-open\":\"Header_links-container-open__fd_SO\",\"link\":\"Header_link__1k3K0\",\"fill\":\"Header_fill__2pYvg\",\"link-active\":\"Header_link-active__5DSAB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"footer\":\"Footer_footer__N-JuZ\"};","import { createContext } from \"react\";\r\nexport const PlacesContext = createContext({});","import { createContext } from \"react\";\r\nexport const MapContext = createContext({});","import styles from \"../../styles/components/global/Footer.module.scss\";\n\nexport default function Footer({ children }) {\n  return <footer className={styles.footer}>&copy; 2022 Oktara Logistic</footer>;\n}","import { useState } from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport styles from \"../../styles/components/global/Header.module.scss\";\n\nconst menuItems = [\n  {\n    text: \"Packages\",\n    url: \"/Packages\",\n  },\n  {\n    text: \"Manage\",\n    url: \"/Manage\",\n  }\n];\n\nconst BurgerMenu = ({ open, setOpen }) => {\n  return (\n    <button\n      className={`${styles.burger}${open ? ` ${styles[\"burger-open\"]}` : \"\"}`}\n      type=\"button\"\n      onClick={function () {\n        setOpen(!open);\n      }}\n    >\n      <div />\n      <div />\n      <div />\n    </button>\n  );\n};\n\nconst MenuElements = ({ open }) => {\n  const router = useLocation();\n\n  return (\n    <div\n      className={`${styles[\"links-container\"]}${\n        open ? ` ${styles[\"links-container-open\"]}` : \"\"\n      }`}\n    >\n      {menuItems.map((menuItem) => (\n        <Link\n          key={menuItem.text}\n          to={menuItem.url}\n          className={`${styles.link} ${\n            router.pathname === menuItem.url ? styles[\"link-active\"] : \"\"\n          }`}\n        >\n          {menuItem.text}\n        </Link>\n      ))}\n    </div>\n  );\n};\n\nexport default function Menu() {\n  const [open, setOpen] = useState(false);\n\n  return (\n    <div className={styles.menu}>\n      <BurgerMenu open={open} setOpen={setOpen} />\n      <MenuElements open={open} />\n    </div>\n  );\n}","import { Link } from \"react-router-dom\";\n\nimport Menu from \"./Menu\";\n\nimport styles from \"../../styles/components/global/Header.module.scss\";\n\nexport default function Header() {\n  return (\n    <header>\n      <nav className={styles.navbar}>\n        <Link to=\"/\" className={styles.logo}>\n          Oktara\n          <span className={styles[\"logo-secondary\"]}>Logistic</span>\n        </Link>\n        <Menu />\n      </nav>\n    </header>\n  );\n}\n","import Footer from \"./Footer\";\nimport Header from \"./Header\";\n\nexport default function PageWrapper({ children }) {\n  return (\n    <div className=\"root\">\n      <Header />\n      <main>{children}</main>\n      <Footer />\n    </div>\n  );\n}","import { createContext } from \"react\";\r\nexport const PackageContext  = createContext({});","import Swal from 'sweetalert2';\r\n\r\nexport const Toast = Swal.mixin({\r\n  toast: true,\r\n  position: 'top-end',\r\n  showConfirmButton: false,\r\n  timer: 3000,\r\n  timerProgressBar: true,\r\n  didOpen: (toast) => {\r\n    toast.addEventListener('mouseenter', Swal.stopTimer)\r\n    toast.addEventListener('mouseleave', Swal.resumeTimer)\r\n  }\r\n});\r\n\r\nexport const getUserLocation = async ()=> {\r\n  return new Promise((resolve, reject) => {\r\n    navigator.geolocation.getCurrentPosition(\r\n      ({ coords }) => {\r\n        resolve([coords.longitude, coords.latitude]);\r\n      },\r\n      (err) => {\r\n        alert(\"No se pudo obtener la geolocalizacion\");\r\n        console.log(err);\r\n        reject();\r\n      }\r\n    );\r\n  });\r\n};","import axios from \"axios\";\r\n\r\nconst directionsApi = axios.create({\r\n  baseURL: \"https://api.mapbox.com/directions/v5/mapbox/driving\",\r\n  params: {\r\n    alternatives: false,\r\n    geometries: \"geojson\",\r\n    overview: \"simplified\",\r\n    steps: false,\r\n    access_token:\r\n      \"pk.eyJ1IjoiY2FybG9zMzg5NyIsImEiOiJja25zMWs1YjgwMjhxMnB0aHBud3pkeG5qIn0.JhmYR1NECWhcO7KCEdpnkA\",\r\n  },\r\n});\r\n\r\nexport default directionsApi;","import axios from \"axios\";\r\n\r\nconst logisticsApi = axios.create({\r\n  baseURL: \"https://oktara-logistic-backend.herokuapp.com/\",\r\n});\r\n\r\nexport default logisticsApi;","import axios from \"axios\";\r\n\r\nconst searchApi = axios.create({\r\n  baseURL: \"https://api.mapbox.com/geocoding/v5/mapbox.places\",\r\n  params: {\r\n    limit: 5,\r\n    language: \"es\",\r\n    access_token:\r\n      \"pk.eyJ1IjoiY2FybG9zMzg5NyIsImEiOiJja25zMWs1YjgwMjhxMnB0aHBud3pkeG5qIn0.JhmYR1NECWhcO7KCEdpnkA\",\r\n  },\r\n});\r\n\r\nexport default searchApi;","import ReactDOM from 'react-dom';\r\n\r\nconst Modal = ({ isShowing, hide, children }) => isShowing ? ReactDOM.createPortal(\r\n  <>\r\n    <div className={\"modal-overlay\"}/>\r\n      <div className={\"modal-wrapper\"} aria-modal aria-hidden tabIndex={-1} role=\"dialog\">\r\n        <div className={\"modal\"}>\r\n          <div className={\"modal-header\"}>\r\n            <button type=\"button\" className={\"modal-close-button\"} data-dismiss=\"modal\" aria-label=\"Close\" onClick={hide} style={{ marginBottom:\".5em\"}}>\r\n              <span aria-hidden=\"true\">&times;</span>\r\n            </button>\r\n          </div>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  </>, document.body\r\n) : null;\r\n\r\nexport default Modal;","import { useState } from 'react';\r\n\r\nconst useModal = () => {\r\n  const [isShowing, setIsShowing] = useState(false);\r\n\r\n  function toggle() {\r\n    setIsShowing(!isShowing);\r\n  }\r\n\r\n  return {\r\n    isShowing,\r\n    toggle,\r\n  }\r\n};\r\nexport default useModal;","import React, {useContext} from \"react\";\nimport { PackageContext } from \"../context/packages/PackageContext\";\nimport { useLocation } from 'react-router-dom'\nimport Card from 'react-bootstrap/Card';\n\nexport default function Package({pack}) {\n  const { addShipment, shipments} = useContext(PackageContext);\n  const {location, name, status} = pack;\n  const path = useLocation();\n\n  return (\n      <Card className={status+\"Packages\"}>\n        <p>ID: {location.id}</p>\n        <p>Name: {name}</p>\n        <p className={status+\"Status\"}>{status}</p>\n        { path.pathname === \"/Manage\" && status === \"Pending\" && !shipments?.includes(pack) && \n          <button onClick={()=>addShipment(pack)}>Prepare</button>\n        }\n      </Card>\n  );\n}","import { useState, useContext, useRef } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { PlacesContext } from \"../context/places/PlacesContext\";\r\nimport { PackageContext } from \"../context/packages/PackageContext\";\r\nimport { Toast } from \"../helpers/helper\";\r\nimport { logisticsApi } from \"../apis\";\r\nimport Card from 'react-bootstrap/Card';\r\n\r\nexport default function CreatePackage() {\r\n  const [locationSelected, setLocationSelected] = useState();\r\n  const [placeSelected, setPlaceSelected] = useState(\"\");\r\n  const [packageName, setPackageName] = useState(\"\");\r\n\r\n  const { register } = useForm();\r\n  const { searchPlacesByTerm, setPlaces, isLoadingPlaces, places } = useContext(PlacesContext);\r\n  const { refreshPackages, packages } = useContext(PackageContext);\r\n\r\n  const debounceRef = useRef();\r\n\r\n  const onQueryChange = (event) => {\r\n    setPlaceSelected(event.target.value);\r\n    if (debounceRef.current) clearTimeout(debounceRef.current);\r\n    debounceRef.current = setTimeout(() => {\r\n      searchPlacesByTerm(event.target.value);\r\n    }, 500);\r\n  };\r\n\r\n  const existPendingPackage=(id)=>{\r\n    return packages.some(pack=>pack.location.id===id && pack.status === \"Pending\");\r\n  }\r\n\r\n  const addNewPackage = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (packageName === \"\" || placeSelected === \"\"){\r\n      Toast.fire({\r\n        icon: 'error',\r\n        title: \"All fields required\"\r\n      });\r\n      return;\r\n    }\r\n    \r\n    if (!existPendingPackage(locationSelected.id)){\r\n\r\n      try {\r\n        const response = await logisticsApi.post(\"/setPackages\", {\r\n          name: packageName,\r\n          location: locationSelected,\r\n          status: \"Pending\",\r\n        });\r\n        \r\n        if (response.status === 200) {\r\n          Toast.fire({\r\n            icon: 'success',\r\n            title: \"Package created\"\r\n          });\r\n          refreshPackages();\r\n          setPackageName(\"\");\r\n          setPlaceSelected(\"\");\r\n        }\r\n  \r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n\r\n    }else{\r\n      Toast.fire({\r\n\t\t\t\ticon: 'error',\r\n\t\t\t\ttitle: \"This package already exist\"\r\n\t\t\t});\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form>\r\n      <input {...register(\"name\", { required: true})} placeholder=\"Name\" onChange={(e) => setPackageName(e.target.value)} value={packageName} required/>\r\n      <input {...register(\"location\", { required: true})} placeholder=\"Location\" onChange={onQueryChange} value={placeSelected} required/>\r\n      {isLoadingPlaces && <>Loading</>}\r\n            {places.length === 0 ? (\r\n              <></>\r\n            ) : (\r\n              <div style={{maxHeight:\"350px\",overflowY: \"auto\", display:\"flex\",flexDirection:\"column\",alignItems:\"center\",border: '1px dashed gray ', margin:\"1.5em auto\",padding:\".5em\" }}>\r\n                {places?.map((place) => (\r\n                  <Card className=\"CardContainer\" style={{color:\"black\",textAlign: 'center', display:\"flex\",flexDirection:\"row\",alignItems:\"center\", cursor:\"pointer\" }}\r\n                    key={place.id}\r\n                    onClick={() => {\r\n                        setPlaceSelected(place.place_name);\r\n                        setLocationSelected(place);\r\n                        setPlaces([]);\r\n                    }}>\r\n                    <p style={{ fontSize: \"12px\" }}>{place.place_name}</p>\r\n                  </Card>\r\n                ))}\r\n              </div>\r\n            )}\r\n      <input type=\"submit\" value=\"Create\" onClick={addNewPackage}/>\r\n    </form>\r\n  );\r\n}","import React, { useEffect, useContext } from \"react\";\r\nimport { PackageContext } from \"../context/packages/PackageContext\";\r\nimport { PlacesContext } from \"../context/places/PlacesContext\";\r\nimport { MapContext } from \"../context/map/MapContext\";\r\nimport { Toast } from \"../helpers/helper\";\r\nimport { logisticsApi } from \"../apis\";\r\nimport Modal from \"./global/Modal\";\r\nimport useModal from '../hooks/useModal';\r\nimport Package from \"./Package\";\r\nimport CreatePackage from \"./CreatePackage\";\r\n\r\nexport default function ManagePackages() {\r\n  const {isShowing, toggle} = useModal();\r\n  const { shipments, refresh, refreshPackages, packages, setPackages, clearShipments} = useContext(PackageContext);\r\n  const { userLocation } = useContext(PlacesContext);\r\n  const { getRouteBetweenPoints } = useContext(MapContext);\r\n\r\n  const getPackages = async () => {\r\n    try {\r\n      const response = await logisticsApi.get(\"/getPackages\");\r\n\r\n      if (response.status === 200) {\r\n        setPackages(response.data.data)\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const handleSendPackages = () => {\r\n    if (!userLocation) return;\r\n\r\n    if(shipments.length <= 0){\r\n      Toast.fire({\r\n        icon: 'error',\r\n        title: \"No packages for Shipments\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    let coords = \"\";\r\n    coords += userLocation.join(\",\") + \";\";\r\n\r\n    for (const shipment of shipments) {\r\n      const [lng, lat] = shipment.location.center;\r\n      coords += `${lng},${lat};`;\r\n    }\r\n\r\n    coords = coords.slice(0, -1);\r\n\r\n    try {\r\n      getRouteBetweenPoints(userLocation, coords);\r\n      setTimeout(() => {\r\n        updatePackages();\r\n        clearShipments();\r\n        refreshPackages();\r\n      }, 5000);\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n\r\n    setTimeout(() => {\r\n      updatePackages();\r\n      clearShipments();\r\n      refreshPackages();\r\n    }, 5000);\r\n  };\r\n\r\n  const updatePackages = async () => {\r\n    try {\r\n      const response = await logisticsApi.put(\"/updatePackage\", {\r\n        list: shipments.map(p=>p.location.id),\r\n        status: \"Shipped\",\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        setPackages(response.data.data)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getPackages();\r\n  }, [refresh]);\r\n\r\n  return (\r\n    <div className=\"Package\">\r\n      <div>\r\n        <button className=\"button\" onClick={toggle}>Create Package</button>\r\n        <button className=\"button\" onClick={handleSendPackages}>Send Package</button>\r\n      </div>\r\n      <div className=\"PackageContent\">\r\n        <div>\r\n          <h3>Pending Packages</h3>\r\n          {packages && packages?.filter((p) => p.status === \"Pending\").reverse().map((pack) => (\r\n            <Package \r\n              key={pack.location.id}\r\n              pack={pack}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div>\r\n          <h3>Shipped Packages</h3>\r\n          {packages && packages?.filter((p) => p.status === \"Shipped\").reverse().map((pack) => (\r\n            <Package \r\n              key={pack.location.id}\r\n              pack={pack}\r\n            />\r\n          ))}\r\n        </div>\r\n      </div>\r\n        <Modal\r\n          isShowing={isShowing}\r\n          hide={toggle}\r\n          children={<CreatePackage/>}\r\n        />\r\n    </div>\r\n  );\r\n}","import React, { useContext, useLayoutEffect, useRef } from \"react\";\nimport { PlacesContext } from \"../context/places/PlacesContext\";\nimport { MapContext } from \"../context/map/MapContext\";\nimport { Map } from \"mapbox-gl\";\nimport PageWrapper from \"../components/global/PageWrapper\";\nimport ManagePackages from \"../components/ManagePackages\";\n\nfunction Manage() {\n  const { isLoading, userLocation } = useContext(PlacesContext);\n  const { setMap } = useContext(MapContext);\n  const mapDiv = useRef(null);\n\n  useLayoutEffect(() => {\n    if (!isLoading) {\n      const map = new Map({\n        container: mapDiv.current, \n        style: \"mapbox://styles/mapbox/light-v10\",\n        center: userLocation, \n        zoom: 7, \n      });\n      setMap(map);\n    }\n  }, [isLoading, userLocation]);\n\n  return (\n    <PageWrapper>\n      <div>\n        <div\n          ref={mapDiv}\n          style={{\n            height: 450,\n          }}>\n        </div>\n        <ManagePackages/>\n      </div>\n    </PageWrapper>\n  );\n}\nexport default Manage;","import React, { useEffect, useContext } from \"react\";\nimport { PackageContext } from \"../context/packages/PackageContext\";\nimport { logisticsApi } from \"../apis\";\nimport PageWrapper from \"../components/global/PageWrapper\";\nimport Package from \"../components/Package\";\n\nexport default function Packages() {\n  const { refresh, packages, setPackages} = useContext(PackageContext);\n\n  const getPackages = async () => {\n    try {\n      const response = await logisticsApi.get(\"/getPackages\");\n      if (response.status === 200) {\n        setPackages(response.data.data)\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  useEffect(() => {\n    getPackages();\n  }, [refresh]);\n\n  return (\n    <PageWrapper>\n      <div className=\"Container\">\n          <h2>All Packages</h2>\n          <div>\n             {packages && packages.map((pack) => (\n                <Package \n                  key={pack.location.id}\n                  pack={pack}\n                />\n            ))}\n          </div>\n      </div>\n    </PageWrapper>\n  );\n}","export const mapReducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"setMap\":\r\n      return {\r\n        ...state,\r\n        isMapReady: true,\r\n        map: action.payload,\r\n      };\r\n    case \"setMarkers\":\r\n      return {\r\n        ...state,\r\n        markers: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { LngLatBounds, Marker, Popup } from \"mapbox-gl\";\r\nimport { directionsApi } from \"../../apis\";\r\nimport { MapContext } from \"./MapContext\";\r\nimport { mapReducer } from \"./mapReducer\";\r\nimport { PackageContext } from \"../packages/PackageContext\";\r\nimport { useContext, useEffect, useReducer } from \"react\";\r\n\r\nconst INITIAL_STATE = {\r\n  isMapReady: false,\r\n  map: undefined,\r\n  markers: [],\r\n};\r\n\r\nexport const MapProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(mapReducer, INITIAL_STATE);\r\n  const { shipments } = useContext(PackageContext);\r\n\r\n  const setMap = (map) => {\r\n    const myLocationPopup = new Popup().setHTML(`\r\n      <h4>We are here</h4>\r\n    `);\r\n    new Marker({\r\n      color: \"#000000\",\r\n    })\r\n    .setLngLat(map.getCenter())\r\n    .setPopup(myLocationPopup)\r\n    .addTo(map);\r\n\r\n    dispatch({\r\n      type: \"setMap\",\r\n      payload: map,\r\n    });\r\n  };\r\n\r\n  const getRouteBetweenPoints = async (\r\n    start ,\r\n    route \r\n  ) => {\r\n    const response = await directionsApi.get(`/${route}`);\r\n    const { geometry } = response.data.routes[0];\r\n    const { coordinates: coords } = geometry;\r\n    const bounds = new LngLatBounds(start, start);\r\n\r\n    for (const coord of coords) {\r\n      const newCoord = [coord[0], coord[1]];\r\n      bounds.extend(newCoord);\r\n    }\r\n\r\n    const sourceData = {\r\n      type: \"geojson\",\r\n      data: {\r\n        type: \"FeatureCollection\",\r\n        features: [\r\n          {\r\n            type: \"Feature\",\r\n            properties: {},\r\n            geometry: {\r\n              type: \"LineString\",\r\n              coordinates: coords,\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    };\r\n\r\n    if (state.map?.getLayer(\"RouteString\")) {\r\n      state.map.removeLayer(\"RouteString\");\r\n      state.map.removeSource(\"RouteString\");\r\n    }\r\n\r\n    state.map?.addSource(\"RouteString\", sourceData);\r\n    state.map?.addLayer({\r\n      id: \"RouteString\",\r\n      type: \"line\",\r\n      source: \"RouteString\",\r\n      layout: {\r\n        \"line-cap\": \"round\",\r\n        \"line-join\": \"round\",\r\n      },\r\n      paint: {\r\n        \"line-color\": \"black\",\r\n        \"line-width\": 3,\r\n      },\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    state.markers.forEach((marker) => marker.remove());\r\n    if (state.map?.getLayer(\"RouteString\")) {\r\n      state.map.removeLayer(\"RouteString\");\r\n      state.map.removeSource(\"RouteString\");\r\n    }\r\n    const newMarkers = [];\r\n    for (const shipment of shipments) {\r\n      const [lng, lat] = shipment.location.center;\r\n      const popup = new Popup().setHTML(`\r\n        <h6>${shipment.location.text_es}</h6>\r\n        <p>${shipment.location.place_name_es}</p>\r\n      `);\r\n      const newMarker = new Marker()\r\n        .setPopup(popup)\r\n        .setLngLat([lng, lat])\r\n        .addTo(state.map);\r\n      newMarkers.push(newMarker);\r\n    }\r\n    dispatch({ type: \"setMarkers\", payload: newMarkers });\r\n  }, [shipments]);\r\n\r\n  return (\r\n    <MapContext.Provider\r\n      value={{\r\n        ...state,\r\n        setMap,\r\n        getRouteBetweenPoints,\r\n      }}\r\n    >\r\n      {children}\r\n    </MapContext.Provider>\r\n  );\r\n};","export const packageReducer = (\r\n  state,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case \"refreshPackages\":\r\n      return {\r\n        ...state,\r\n        refresh: !state.refresh,\r\n      };\r\n    case \"setPackages\":\r\n      return {\r\n        ...state,\r\n        packages: action.payload,\r\n      };\r\n    case \"addShipment\":\r\n      return {\r\n        ...state,\r\n        shipments: [...state.shipments, action.payload],\r\n      };\r\n    case \"removeShipment\":\r\n      return {\r\n        ...state,\r\n        shipments: [...action.payload],\r\n      };\r\n    case \"clearShipments\":\r\n      return {\r\n        ...state,\r\n        shipments: [],\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { useReducer } from \"react\";\r\nimport { PackageContext } from \"./PackageContext\";\r\nimport { packageReducer } from \"./packageReducer\";\r\n\r\nconst INITIAL_STATE = {\r\n  refresh: false,\r\n  packages: [],\r\n  shipments: [],\r\n};\r\n\r\n\r\nexport const PackageProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(packageReducer, INITIAL_STATE);\r\n\r\n  const refreshPackages = () => {\r\n    dispatch({\r\n      type: \"refreshPackages\",\r\n    });\r\n  };\r\n\r\n  const setPackages = (packages) => {\r\n    dispatch({\r\n      type: \"setPackages\",\r\n      payload: packages,\r\n    });\r\n  };\r\n\r\n  const addShipment = (p) => {\r\n    dispatch({\r\n      type: \"addShipment\",\r\n      payload: p,\r\n    });\r\n  };\r\n\r\n  const clearShipments = () => {\r\n    dispatch({\r\n      type: \"clearShipments\",\r\n    });\r\n  };\r\n\r\n  const removeShipment = (p) => {\r\n    const index = state.shipments.indexOf(p);\r\n    state.shipments.splice(index, 1);\r\n\r\n    dispatch({\r\n      type: \"removeShipment\",\r\n      payload: state.shipments,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <PackageContext.Provider\r\n      value={{\r\n        ...state,\r\n        refreshPackages,\r\n        setPackages,\r\n        addShipment,\r\n        removeShipment,\r\n        clearShipments,\r\n      }}\r\n    >\r\n      {children}\r\n    </PackageContext.Provider>\r\n  );\r\n};","export const placesReducer = (\r\n  state,\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case \"setUserLocation\":\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        userLocation: action.payload,\r\n      };\r\n    case \"setLoadingPlaces\":\r\n      return {\r\n        ...state,\r\n        isLoadingPlaces: true,\r\n        places: [],\r\n      };\r\n    case \"setPlaces\":\r\n      return {\r\n        ...state,\r\n        isLoadingPlaces: false,\r\n        places: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};","import { getUserLocation } from \"../../helpers/helper\";\r\nimport { PlacesContext } from \"./PlacesContext\";\r\nimport { placesReducer } from \"./placesReducer\";\r\nimport { searchApi } from \"../../apis\";\r\nimport { useEffect, useReducer } from \"react\";\r\n\r\nconst INITIAL_STATE = {\r\n  isLoading: true,\r\n  userLocation: undefined,\r\n  isLoadingPlaces: false,\r\n  places: [],\r\n  packages: [],\r\n};\r\n\r\nexport const PlacesProvider = ({ children }) => {\r\n  const [state, dispatch] = useReducer(placesReducer, INITIAL_STATE);\r\n\r\n  const searchPlacesByTerm = async (query) => {\r\n    if (query.length === 0) {\r\n      dispatch({ type: \"setPlaces\", payload: [] });\r\n      return [];\r\n    }\r\n    if (!state.userLocation) throw new Error(\"No hay ubicacion del usuario\");\r\n\r\n    dispatch({ type: \"setLoadingPlaces\" });\r\n\r\n    const response = await searchApi.get(`/${query}.json`, {\r\n      params: {\r\n        proximity: state.userLocation.join(\",\"),\r\n      },\r\n    });\r\n\r\n    dispatch({ type: \"setPlaces\", payload: response.data.features });\r\n\r\n    return response.data.features;\r\n  };\r\n\r\n  const setPlaces = (places) => {\r\n    dispatch({ type: \"setPlaces\", payload: places });\r\n  };\r\n\r\n  useEffect(() => {\r\n    getUserLocation().then((lngLat) =>\r\n      dispatch({ type: \"setUserLocation\", payload: lngLat })\r\n    );\r\n  }, []);\r\n\r\n  return (\r\n    <PlacesContext.Provider\r\n      value={{\r\n        ...state,\r\n        searchPlacesByTerm,\r\n        setPlaces,\r\n      }}\r\n    >\r\n      {children}\r\n    </PlacesContext.Provider>\r\n  );\r\n};","import Manage from \"./pages/Manage\";\nimport Packages from \"./pages/Packages\";\nimport { MapProvider } from \"./context/map/MapProvider\";\nimport { PackageProvider } from \"./context/packages/PackageProvider\";\nimport { PlacesProvider } from \"./context/places/PlacesProvider\";\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <PlacesProvider>\n      <PackageProvider>\n        <MapProvider>\n          <Router>\n            <Switch>\n              <Route exact path=\"/Packages\" component={Packages} />\n              <Route exact path=\"/Manage\" component={Manage} />\n              <Route exact path=\"/\" component={Packages} />\n            </Switch>\n          </Router>\n        </MapProvider>\n      </PackageProvider>\n    </PlacesProvider>\n  );\n}\nexport default App;","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport mapboxgl from \"mapbox-gl\";\nimport App from \"./App\";\nimport './styles/globals.scss';\n\nmapboxgl.accessToken = \"pk.eyJ1IjoiY2FybG9zMzg5NyIsImEiOiJjbGEwZW9idWcwNHJ1M3dxZ2doYm10dmJpIn0.Wygg1LWkef9akBZdNzleBA\";\n\nif (!navigator.geolocation) {\n  alert(\"The application will not work without Geolocation\");\n  throw new Error(\"You have to allow Geolocation\");\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);"],"sourceRoot":""}